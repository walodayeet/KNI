# =============================================================================
# KNI Platform - Comprehensive Environment Configuration
# =============================================================================
# Copy this file to .env.local and update the values
# Never commit .env.local to version control

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL Configuration (Primary Database)
# Choose ONE of the following configurations:

# === LOCAL POSTGRESQL ===
# For local development with PostgreSQL
DATABASE_URL="postgresql://kni_user:your_password@localhost:5432/kni_db"
DIRECT_URL="postgresql://kni_user:your_password@localhost:5432/kni_db"

# === DOCKER POSTGRESQL ===
# For Docker-based PostgreSQL (uncomment to use)
# DATABASE_URL="postgresql://kni_user:kni_password@localhost:5432/kni_db"
# DIRECT_URL="postgresql://kni_user:kni_password@localhost:5432/kni_db"

# === CLOUD POSTGRESQL ===
# For cloud-hosted PostgreSQL (Railway, Neon, AWS RDS, etc.)
# DATABASE_URL="postgresql://username:password@host:port/database"
# DIRECT_URL="postgresql://username:password@host:port/database"

# Database Pool Configuration
DATABASE_POOL_SIZE="10"
DATABASE_TIMEOUT="30000"
DATABASE_SSL="false"
DATABASE_LOGGING="false"

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT Secret - Use a strong, random string (minimum 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-minimum-32-characters-long"

# NextAuth Secret - Required for NextAuth.js
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-nextauth-secret-minimum-32-characters-long"

# Application URL - Update for production
NEXTAUTH_URL="http://localhost:3003"

# Additional Security
CSRF_SECRET="your-csrf-secret-here"
ENCRYPTION_KEY="your-32-char-encryption-key-here"

# JWT Token Expiration (optional)
# JWT_EXPIRES_IN="7d"

# Session cleanup interval in hours (optional)
# SESSION_CLEANUP_INTERVAL="24"

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# Environment mode
NODE_ENV="development"

# Application settings
APP_NAME="KNI Platform"
APP_VERSION="1.0.0"
NEXT_PUBLIC_APP_URL="http://localhost:3000"
NEXT_PUBLIC_APP_NAME="KNI Platform"
NEXT_PUBLIC_APP_DESCRIPTION="Knowledge and Intelligence Platform"

# Rate limiting (requests per minute per IP)
RATE_LIMIT_MAX="100"
RATE_LIMIT_WINDOW="900000"

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
# Log level: error, warn, info, debug
LOG_LEVEL="info"

# Enable request logging
ENABLE_REQUEST_LOGGING="true"

# =============================================================================
# EMAIL CONFIGURATION (Optional - for future features)
# =============================================================================
# SMTP settings for email notifications
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
SMTP_FROM="noreply@testas.com"

# =============================================================================
# CACHE & REDIS CONFIGURATION
# =============================================================================
# Redis for caching and session storage
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=""
REDIS_DB="0"
REDIS_CLUSTER_MODE="false"
REDIS_SENTINEL_HOSTS=""
REDIS_SENTINEL_NAME=""

# Cache Configuration
CACHE_TTL_DEFAULT="3600"  # 1 hour
CACHE_TTL_SHORT="300"     # 5 minutes
CACHE_TTL_LONG="86400"    # 24 hours
CACHE_COMPRESSION="true"

# =============================================================================
# FILE UPLOAD & STORAGE
# =============================================================================
# Upload Configuration
UPLOAD_PROVIDER="local"  # local, s3, gcs, cloudinary
NEXT_PUBLIC_MAX_FILE_SIZE="10485760"  # 10MB
UPLOAD_DIR="./uploads"
ALLOWED_FILE_TYPES="jpg,jpeg,png,pdf,doc,docx,txt,csv,xlsx"
UPLOAD_VIRUS_SCAN="false"
UPLOAD_GENERATE_THUMBNAILS="true"

# AWS S3 Configuration
AWS_S3_BUCKET=""
AWS_S3_REGION="us-east-1"
AWS_S3_ACCESS_KEY_ID=""
AWS_S3_SECRET_ACCESS_KEY=""
AWS_S3_ENDPOINT=""

# Google Cloud Storage
GCS_BUCKET=""
GCS_PROJECT_ID=""
GCS_KEY_FILE=""

# Cloudinary
CLOUDINARY_CLOUD_NAME=""
CLOUDINARY_API_KEY=""
CLOUDINARY_API_SECRET=""

# =============================================================================
# EMAIL SERVICES
# =============================================================================
# Email Provider Configuration
EMAIL_PROVIDER="sendgrid"  # sendgrid, nodemailer, ses
EMAIL_FROM="noreply@kni-platform.com"
EMAIL_FROM_NAME="KNI Platform"

# SendGrid
SENDGRID_API_KEY=""
SENDGRID_TEMPLATE_ID_WELCOME=""
SENDGRID_TEMPLATE_ID_RESET=""
SENDGRID_TEMPLATE_ID_VERIFICATION=""

# AWS SES
AWS_SES_REGION="us-east-1"
AWS_SES_ACCESS_KEY_ID=""
AWS_SES_SECRET_ACCESS_KEY=""

# =============================================================================
# EXTERNAL API SERVICES
# =============================================================================
# OpenAI Configuration
OPENAI_API_KEY="sk-your-openai-api-key-here"
OPENAI_ORGANIZATION=""
OPENAI_MODEL="gpt-4"

# Stripe Payment Processing
STRIPE_SECRET_KEY="sk_test_your-stripe-secret-key"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_your-stripe-publishable-key"
STRIPE_WEBHOOK_SECRET=""

# Twilio SMS/Voice
TWILIO_ACCOUNT_SID=""
TWILIO_AUTH_TOKEN=""
TWILIO_PHONE_NUMBER=""

# Social Media APIs
SLACK_BOT_TOKEN=""
SLACK_SIGNING_SECRET=""
SLACK_WEBHOOK_URL=""

DISCORD_BOT_TOKEN=""
DISCORD_CLIENT_ID=""
DISCORD_CLIENT_SECRET=""

TELEGRAM_BOT_TOKEN=""
TELEGRAM_WEBHOOK_URL=""

# GitHub Integration
GITHUB_TOKEN=""
GITHUB_WEBHOOK_SECRET=""

# =============================================================================
# SEARCH CONFIGURATION
# =============================================================================
# Search Provider
SEARCH_PROVIDER="elasticsearch"  # elasticsearch, algolia, local

# Elasticsearch
ELASTICSEARCH_URL="http://localhost:9200"
ELASTICSEARCH_USERNAME=""
ELASTICSEARCH_PASSWORD=""
ELASTICSEARCH_INDEX_PREFIX="kni"

# Algolia
ALGOLIA_APP_ID=""
ALGOLIA_API_KEY=""
ALGOLIA_SEARCH_KEY=""

# =============================================================================
# QUEUE & BACKGROUND JOBS
# =============================================================================
# Queue Configuration
QUEUE_PROVIDER="bull"  # bull, sqs, redis
QUEUE_REDIS_URL="redis://localhost:6379"
QUEUE_CONCURRENCY="5"

# AWS SQS
AWS_SQS_REGION="us-east-1"
AWS_SQS_ACCESS_KEY_ID=""
AWS_SQS_SECRET_ACCESS_KEY=""
AWS_SQS_QUEUE_URL=""

# =============================================================================
# REAL-TIME COMMUNICATION
# =============================================================================
# Socket.IO Configuration
SOCKET_IO_CORS_ORIGIN="http://localhost:3000"
SOCKET_IO_ADAPTER="redis"  # memory, redis

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================
# Webhook Settings
WEBHOOK_SECRET="your-webhook-secret-here"
WEBHOOK_TIMEOUT="30000"
WEBHOOK_RETRY_ATTEMPTS="3"

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# Backup Settings
BACKUP_PROVIDER="local"  # local, s3, gcs
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS="30"
BACKUP_ENCRYPTION="true"

# =============================================================================
# WORKFLOW AUTOMATION
# =============================================================================
# Workflow Engine
WORKFLOW_ENGINE_ENABLED="true"
WORKFLOW_MAX_STEPS="100"
WORKFLOW_TIMEOUT="3600000"  # 1 hour

# =============================================================================
# NOTIFICATION SYSTEM
# =============================================================================
# Notification Configuration
NOTIFICATION_CHANNELS="email,push,sms"
NOTIFICATION_QUEUE_ENABLED="true"
NOTIFICATION_RETRY_ATTEMPTS="3"

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Enable debug mode
DEBUG="false"

# Disable telemetry
NEXT_TELEMETRY_DISABLED="1"

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Core Features
FEATURE_NEW_DASHBOARD="true"
FEATURE_ADVANCED_ANALYTICS="false"
FEATURE_AI_ASSISTANT="true"
FEATURE_REAL_TIME_CHAT="true"
FEATURE_FILE_SHARING="true"
FEATURE_VIDEO_CALLS="false"
FEATURE_WORKFLOW_AUTOMATION="true"
FEATURE_ADVANCED_SEARCH="true"

# Public Feature Flags
NEXT_PUBLIC_ENABLE_ANALYTICS="false"
NEXT_PUBLIC_ENABLE_CHAT="true"
NEXT_PUBLIC_ENABLE_NOTIFICATIONS="true"
NEXT_PUBLIC_ENABLE_DEVTOOLS="true"
NEXT_PUBLIC_LOG_LEVEL="info"

# Analytics
NEXT_PUBLIC_GOOGLE_ANALYTICS_ID="G-XXXXXXXXXX"

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================
# For production deployment, also set:
# - VERCEL_URL (automatically set by Vercel)
# - DATABASE_URL (production database)
# - Update NEXTAUTH_URL to production domain
# - Use strong, unique secrets
# - Set NODE_ENV="production"

# Deployment URLs
VERCEL_URL="your-vercel-url.vercel.app"
DOCKER_REGISTRY="your-docker-registry.com"

# =============================================================================
# MONITORING & ANALYTICS
# =============================================================================
# Error Tracking
SENTRY_DSN="https://your-sentry-dsn-here"
SENTRY_ORG=""
SENTRY_PROJECT=""
SENTRY_AUTH_TOKEN=""

# Performance Monitoring
NEW_RELIC_LICENSE_KEY=""
NEW_RELIC_APP_NAME="KNI Platform"

# Analytics Services
GOOGLE_TAG_MANAGER_ID=""
MIXPANEL_TOKEN=""
AMPLITUDE_API_KEY=""

# Logging Services
LOGTAIL_SOURCE_TOKEN="your-logtail-token-here"
DATADOG_API_KEY=""
DATADOG_APP_KEY=""

# =============================================================================
# INTERNATIONALIZATION
# =============================================================================
# i18n Configuration
DEFAULT_LOCALE="en"
SUPPORTED_LOCALES="en,vn,fr,es,de,ja,ko,zh"
I18N_FALLBACK_LOCALE="en"

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
# Test Database
TEST_DATABASE_URL="postgresql://kni_user:your_password@localhost:5432/kni_test"
TEST_REDIS_URL="redis://localhost:6379/1"
TEST_EMAIL_PROVIDER="mock"
TEST_UPLOAD_PROVIDER="mock"

# =============================================================================
# PERFORMANCE & OPTIMIZATION
# =============================================================================
# Performance Monitoring
PERFORMANCE_MONITORING="true"
SLOW_QUERY_THRESHOLD="1000"  # ms
MEMORY_USAGE_THRESHOLD="80"  # percentage
CPU_USAGE_THRESHOLD="80"     # percentage

# CDN Configuration
CDN_URL=""
CDN_ENABLED="false"

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
# Health Check Settings
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_INTERVAL="30000"  # 30 seconds
HEALTH_CHECK_TIMEOUT="5000"    # 5 seconds

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
# Session Management
SESSION_STORE="redis"  # memory, redis, database
SESSION_COOKIE_NAME="kni-session"
SESSION_COOKIE_SECURE="false"
SESSION_COOKIE_HTTP_ONLY="true"
SESSION_COOKIE_SAME_SITE="lax"
SESSION_MAX_AGE="2592000"  # 30 days

# =============================================================================
# API CONFIGURATION
# =============================================================================
# API Settings
API_VERSION="v1"
API_PREFIX="/api"
API_RATE_LIMIT="1000"
API_TIMEOUT="30000"
API_CORS_ENABLED="true"

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Deployment Settings
DEPLOYMENT_ENVIRONMENT="development"
DEPLOYMENT_VERSION="1.0.0"
DEPLOYMENT_BUILD_ID=""
DEPLOYMENT_COMMIT_SHA=""